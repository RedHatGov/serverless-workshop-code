schemaVersion: 2.1.0
metadata:
  name: serverless-workshop-ml
  version: 2.1.0
projects:
  - name: serverless-workshop-code
    git:
      remotes:
        origin: "https://github.com/RedHatGov/serverless-workshop-code.git"
      checkoutFrom:
        revision: workshop
components:
  - name: python
    container:
      image: registry.redhat.io/devspaces/udi-rhel8@sha256:a5a67003870daf10f941b0279a065358dd1ace6d40826462b91bae9868216eff
      memoryLimit: 512Mi
      mountSources: true
commands:
  - id: install
    exec:
      commandLine: pip-3.6 install -r requirements.txt
      component: python
      group:
        kind: run
      label: Install dependencies
      workingDir: ${PROJECTS_ROOT}/serverless-workshop-code/model/prediction
  - id: run
    exec:
      commandLine: FLASK_APP=prediction.py FLASK_ENV=development python3.6 -m flask run
      component: python
      group:
        kind: run
      label: Start app
      workingDir: ${PROJECTS_ROOT}/serverless-workshop-code/model/prediction
